@model IEnumerable<Biblioteca.Models.Reserva>
@{
    ViewData["Title"] = "Retiradas de Livros";
}

<div class="row">
    <div class="col-1 col-md-2 col-lg-2">
    </div>

    <div id="divMovimentos" class="col-10 col-md-8 col-lg-8 bg-black text-light m-lg-5 mb-3 p-5">
        <!-- Menu de Abas Bootstrap 5.3 -->
        <ul class="nav nav-tabs text-light mb-4 fs-4" id="retiradaDevolucaoTabs" role="tablist" style="width:100%;">
            <li class="nav-item w-50" role="presentation">
                <button class="nav-link active w-100 text-center" id="retiradas-tab" data-bs-toggle="tab" data-bs-target="#divRetirada" type="button" role="tab" aria-controls="divRetirada" aria-selected="true">
                    Retirar
                </button>
            </li>
            <li class="nav-item w-50" role="presentation">
                <button class="nav-link w-100 text-center" id="devolucao-tab" data-bs-toggle="tab" data-bs-target="#divDevolucao" type="button" role="tab" aria-controls="divDevolucao" aria-selected="false">
                    Devolver
                </button>
            </li>
        </ul>


        @if (TempData["SuccessMessage"] != null)
        {
            <div class="alert alert-success alert-dismissible fade show text-center" role="alert" id="alertSuccess">
                @TempData["SuccessMessage"]
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Fechar"></button>
            </div>
            <script>
                setTimeout(function () {
                    var alert = document.getElementById('alertSuccess');
                    if (alert) {
                        var bsAlert = bootstrap.Alert.getOrCreateInstance(alert);
                        bsAlert.close();
                    }
                }, 4000);
            </script>
        }
        @* <div id="divRetirada" class="bg-black text-light m-lg-5 mb-3 p-5"> *@
        <div class="tab-content">
            <div class="tab-pane fade show active" id="divRetirada" role="tabpanel" aria-labelledby="retiradas-tab">

                <h1 class="text-center mb-5">Retiradas de Livros</h1>

                <div id="divLocalizarReserva m-5 px-3">
                    <!-- Campo de Busca -->
                    <form asp-action="Busca" method="get" class="mb-3">
                        <div class="input-group">
                            <input type="text" name="searchTerm" class="form-control" placeholder="Localizar Reserva.." />
                            <button type="submit" class="btn btn-outline-light"><i class="bi bi-search"></i> Localizar</button>
                        </div>
                    </form>
                </div>
                <table class="table table-dark table-striped">
                    <thead>
                        <tr>
                            <th>Data Reserva</th>
                            <th>Aluno</th>
                            <th>Livro</th>
                            <th></th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {
                            <tr>
                                <td>@item.DataReserva.ToString("dd/MM/yyyy")</td>
                                <td>@item.Usuario.NomeCompleto</td>
                                <td>@item.Livro.Titulo</td>

                                <td>
                                    <a asp-controller="Movimentacoes" asp-action="Retirar" asp-route-id="@item.ReservaId" class="btn btn-light text-decoration-none">
                                        Retirar
                                    </a>
                                </td>

                                <td>
                                    <a asp-controller="Reservas" asp-action="Cancelar" asp-route-id="@item.ReservaId" class="btn btn-light text-decoration-none">
                                        Cancelar
                                    </a>
                                </td>

                            </tr>
                        }
                    </tbody>
                </table>
            </div>


            <div class="tab-pane fade" id="divDevolucao" role="tabpanel" aria-labelledby="devolucao-tab">
                <h1 class="text-center mb-5">Devoluções de Livros</h1>
                <div id="divLocalizarDevolucao m-5 px-3">
                    <!-- Campo de Busca -->
                    <form asp-action="BuscaRetirada" method="get" class="mb-3">
                        <div class="input-group">
                            <input type="text" name="searchTerm" class="form-control" placeholder="Localizar Retirada.." />
                            <button type="submit" class="btn btn-outline-light"><i class="bi bi-search"></i> Localizar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="col-1 col-md-2 col-lg-2">
</div>

